# 聊天室项目 需求说明

## 功能需求

### 账户管理

- 登录 [0]
  - 密码只可以支持　***　之类的回显,其他数字应该隐藏
- 注册 [0]
- 找回密码 [1]

### 好友、群管理

- 创建群 [0]
- 添加好友/加入群 [0]
  - 注意不能与服务器加好友！
- 删除好友/退出群 [0]
- 查看所有好友（好友列表）[0]
  - 应当能显示好友的状态（是否在线） [0]
  - 界面应当用户友好[1]
- 解散群（仅群主有权限如此做）[0]
- 群成员列表 [0]
- 群主可以设置管理员，且群主、管理员有权限移除群成员 [1]
- 禁言（仅群主、管理员有权限如此做） [1]

### 通信交互

- 私聊、群聊功能 [0]
  - 该部分功能不应该存在流氓行为，即：不是好友无法发送消息。
  - 聊天应当是实时的（即对方发送消息后立即显示而非需要进行操作）[0]
  - 可以给非在线好友发送消息，当其上线时提示有离线消息 [2]
  - 当前不在线的群成员上线后也可通过操作收到之前的群聊消息 [3]
- 屏蔽某人/群的消息 [4]
  - 若消息被屏蔽，则不应出现在聊天记录中
  - 提供解除屏蔽的功能
  - 当然，被屏蔽的人或群也不可以发送离线消息
- 聊天记录 [0]
  - 若支持离线消息，离线消息也应存在于聊天记录中。[0]
  - 聊天记录格式：【发送人昵称　＋　接收人昵称　＋　发送内容　＋　发送时间】
- 文件传输 [0]
  - 给好友发送文件 [0]
  - 给好友发送离线文件 [1]
  - 在群中分享文件 [2]
  - 发送文件支持断点续传 [9]

## 非功能需求

- 应当是使用网络通信的C/S模型的应用程序，你需要同时编写客户端和服务器 [0]
- 客户端的错误输入、错误状态不应当影响服务器的正常运行 [0]
  - 即：服务器不能因为客户端的错误数据而崩溃
  - 同理的，客户端意外断开连接或主动断开连接不应当导致服务器退出
- 客户端对于错误输入、用户操作失误应有必要的手段处理之 [0]
  - 注意，即使客户端验证过数据的合法性，服务器仍需要再次验证数据的合法性
- **服务器应当可以同时给多个客户端提供服务，不受客户端需要的服务而影响** [0]
  - 通俗的来说，客户端不能"独占"服务器，即某一客户端在接受服务时其他客户端无法操作！！！
- 客户端界面美观 [0]
  - 也可使用相关的图形库编写图形界面，但不建议无基础的现场学习并编写 [5]
- 代码风格优秀，框架设计合理，文件分工明确
  - 鼓励采用多文件配合`Makefile`编译的方法 [1]
  - **必须**使用某种确定好的代码风格
  - 减少不必要的长函数，除非有非这样做不可实现的特殊需求，否则**禁止出现**缩进超过6次的代码
  - **禁止**无参数、无返回值函数的出现
  - 变量、文件、类型命名合理且明确
  - 鼓励写有意义、有价值的注释 [1]
  - 若使用**C**语言，可考虑采用面向对象技术 [4]
  - 其他有益于提升代码可读性的尝试 [1]

## 技术点

- 网络通信中采用序列化的数据格式，例如：`JSON`（推荐）、`XML`等 [1]
  - C语言常见的`JSON`函数库：`cJSON`（推荐）、`json-c`
- 服务端采用多线程、多路复用等改善效率的方式 [0]
  - 多路复用：`select`、`poll`、`epoll`（推荐） [1]
  - 多线程还可以使用线程池，提高线程利用率，但不推荐基础差的同学加 [3]
- 自定义应用层通信协议 [0]
  - 注意处理TCP的流协议特性

## 补充说明

  - 以上都是一些基本的要求，如果有自己的想法也可以再加入。需求后`[n]`标识中数字为0的代表基本需求，所有人都应当完成这些需求。数字不为0的代表选择性需求，你应当根据自己的能力选择性的完成这些需求，并且`n`的数字越大，表示实现的难度可能越高，达到要求所需要付出的努力也越大，
请量力而为。但总共选择的需求难度和不应当小于`6`。

## 验收标准

1. 需求说明中后注明`[0]`的需求必须完成，若不完成或不能在所有情况下都正常工作，则项目验收**不通过**。
2. 需求说明中后注明`[n]`(n > 0)的需求，`n`的总和至少大于`6`，当该功能不能工作时，记为`0`，若不能在所有情况下正常工作，则分值扣除一半（向下取整）。若`n`总和不足`6`，则项目验收**不通过**。
